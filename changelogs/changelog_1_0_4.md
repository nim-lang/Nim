# v1.0.4 - 2019-11-26



## Language changes

- Conversions to unsigned integers are unchecked at runtime, imitating earlier Nim
  versions. The documentation was improved to acknowledge this special case.
  See https://github.com/nim-lang/RFCs/issues/175 for more details. (#12688)

- added 'since' template for further stdlib additions

- added valgrind support for 64-bit Linux to the CIs and testament (#12646)

- refactoring: --newruntime consists of 3 different switches

- Refactor injectdestructors (#12295)

- Add `or detectOs(Manjaro)` (#12587)

- --os:ios needs to imply defined(macosx) (#12585)

- export nim.cfg parser (#12602)



## Bugfixes

- Fixed "gorge(Ex) fails after a few calls on OSX"
  ([#12337](https://github.com/nim-lang/Nim/issues/12337))
- Fixed "Improve posix module"
  ([#10723](https://github.com/nim-lang/Nim/issues/10723))
- Fixed "nim check allows gorgeEx but doesn't allow writeFile"
  ([#12491](https://github.com/nim-lang/Nim/issues/12491))
- Fixed "Low level arithmetics bug: -3 mod 7 == 3"
  ([#12514](https://github.com/nim-lang/Nim/issues/12514))
- Fixed "Broken link to c2nim in backends.rst/.html"
  ([#12537](https://github.com/nim-lang/Nim/issues/12537))
- Fixed "generic argument with default value causes incorrect generic type resolution"
  ([#12528](https://github.com/nim-lang/Nim/issues/12528))
- Fixed "regression: compiler/vmgen.nim(354, 20) `false` leaking temporary 10 slotTempInt [AssertionError]
  ([#12547](https://github.com/nim-lang/Nim/issues/12547))
- Fixed "Compile/link broken for nim (64-bit only) on Windows"
  ([#12536](https://github.com/nim-lang/Nim/issues/12536))
- Fixed "No `=destroy` for elements of closure environments other than for latest devel --gc:destructors"
  ([#12577](https://github.com/nim-lang/Nim/issues/12577))
- Fixed "[1.0.0] Cannot compile anything with --cpu:avr"
  ([#12395](https://github.com/nim-lang/Nim/issues/12395))
- Fixed "Compiler crash with invalid object variant"
  ([#12379](https://github.com/nim-lang/Nim/issues/12379))
- Fixed "push pragma is silently ignored if position is in front of import statement"
  ([#5050](https://github.com/nim-lang/Nim/issues/5050))
- Fixed "Error with strformat + asyncdispatch + const"
  ([#12612](https://github.com/nim-lang/Nim/issues/12612))
- Fixed "The --nimblePath is additive; need a pain-free workaround"
  ([#12601](https://github.com/nim-lang/Nim/issues/12601))
- Fixed "nim.cfg syntax for --define:FOO:VAL undocumented or absent"
  ([#12367](https://github.com/nim-lang/Nim/issues/12367))
- Fixed "vm string literals do not work when generated by a macro"
  ([#12670](https://github.com/nim-lang/Nim/issues/12670))
- Fixed "StaticRead does force a recompile if static file changes."
  ([#12663](https://github.com/nim-lang/Nim/issues/12663))
- Fixed crash in terminate handler
  ([#12572](https://github.com/nim-lang/Nim/pull/12572))
- Fixed newLit for objects having string fields
  ([#12542](https://github.com/nim-lang/Nim/pull/12542))



## Documentation improvements

- Documentation Math module (#12460)
- Fix many broken links and prefer relative links within docs (#12463)
- sequtils: replace deprecated 'random' call within example (#12515)
- integer literal documentation (#12513)
- Fix code style errors (#12545)
- fix several typos in documentation and comments (#12553)
- Add docs to better distinguish among getProjectPath, getCurrentDir and currentSourcePath (#12565)
- doc/tut3.rst: Fix typo in Introduction (#12607)
- Add links to packaging and distro pages (#12603)
- fix documentation of `$`\*(dt: DateTime) (#12660)
- Clarifies experimental / parallel example on manual.rst (#12472)
- Fix wrong section hierarchy in the manual (#12724)
