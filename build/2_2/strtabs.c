/* Generated by Nimrod Compiler v0.8.9 */
/*   (c) 2010 Andreas Rumpf */

typedef long long int NI;
typedef unsigned long long int NU;
#include "nimbase.h"

#include <pthread.h>
typedef struct TY64408 TY64408;
typedef struct TNimObject TNimObject;
typedef struct TNimType TNimType;
typedef struct TNimNode TNimNode;
typedef struct TY44006 TY44006;
typedef struct TY44004 TY44004;
typedef struct NimStringDesc NimStringDesc;
typedef struct TGenericSeq TGenericSeq;
typedef struct TY10602 TY10602;
typedef struct TY10990 TY10990;
typedef struct TY10618 TY10618;
typedef struct TY10614 TY10614;
typedef struct TY10610 TY10610;
typedef struct TY10988 TY10988;
typedef struct TY440 TY440;
typedef struct TY416 TY416;
typedef struct E_Base E_Base;
struct TNimType {
NI size;
NU8 kind;
NU8 flags;
TNimType* base;
TNimNode* node;
void* finalizer;
};
struct TNimObject {
TNimType* m_type;
};
struct TGenericSeq {
NI len;
NI space;
};
typedef NIM_CHAR TY239[100000001];
struct NimStringDesc {
  TGenericSeq Sup;
TY239 data;
};
struct TY44004 {
NimStringDesc* Key;
NimStringDesc* Val;
};
struct TY64408 {
  TNimObject Sup;
NI Counter;
TY44006* Data;
NU8 Mode;
};
struct TY10602 {
NI Refcount;
TNimType* Typ;
};
struct TY10618 {
NI Len;
NI Cap;
TY10602** D;
};
struct TY10614 {
NI Counter;
NI Max;
TY10610* Head;
TY10610** Data;
};
struct TY10988 {
NI Stackscans;
NI Cyclecollections;
NI Maxthreshold;
NI Maxstacksize;
NI Maxstackcells;
NI Cycletablesize;
};
struct TY10990 {
TY10618 Zct;
TY10618 Decstack;
TY10614 Cycleroots;
TY10618 Tempstack;
NI Cyclerootslock;
NI Zctlock;
TY10988 Stat;
};
struct TNimNode {
NU8 kind;
NI offset;
TNimType* typ;
NCSTRING name;
NI len;
TNimNode** sons;
};
struct E_Base {
  TNimObject Sup;
E_Base* parent;
NCSTRING name;
NimStringDesc* message;
};
struct TY416 {
  E_Base Sup;
};
struct TY440 {
  TY416 Sup;
};
typedef NU8 TY21402[32];
typedef NI TY8614[8];
struct TY10610 {
TY10610* Next;
NI Key;
TY8614 Bits;
};
struct TY44006 {
  TGenericSeq Sup;
  TY44004 data[SEQ_DECL_SIZE];
};
N_NIMCALL(NI, nstlen)(TY64408* T_64421);
N_NIMCALL(NI, Myhash_64466)(TY64408* T_64468, NimStringDesc* Key_64469);
N_NIMCALL(NI, Hash_63480)(NimStringDesc* X_63482);
N_NIMCALL(NI, Hashignorecase_63577)(NimStringDesc* X_63579);
N_NIMCALL(NI, Hashignorestyle_63521)(NimStringDesc* X_63523);
N_NIMCALL(NIM_BOOL, Mycmp_64471)(TY64408* T_64473, NimStringDesc* A_64474, NimStringDesc* B_64475);
N_NIMCALL(NI, Cmp_1321)(NimStringDesc* X_1323, NimStringDesc* Y_1324);
N_NIMCALL(NI, nsuCmpIgnoreCase)(NimStringDesc* A_23595, NimStringDesc* B_23596);
N_NIMCALL(NI, nsuCmpIgnoreStyle)(NimStringDesc* A_23638, NimStringDesc* B_23639);
N_NIMCALL(NIM_BOOL, Mustrehash_64483)(NI Length_64485, NI Counter_64486);
N_NIMCALL(void, internalAssert)(NCSTRING File_5054, NI Line_5055, NIM_BOOL Cond_5056);
N_NIMCALL(NI, mulInt)(NI A_6603, NI B_6604);
static N_INLINE(NI, subInt)(NI A_5803, NI B_5804);
N_NOINLINE(void, raiseOverflow)(void);
static N_INLINE(NI, Nexttry_64494)(NI H_64496, NI Maxhash_64497);
static N_INLINE(NI, addInt)(NI A_5603, NI B_5604);
N_NIMCALL(NI, Rawget_64499)(TY64408* T_64501, NimStringDesc* Key_64502);
N_NOINLINE(void, raiseIndexError)(void);
N_NIMCALL(NimStringDesc*, nstGet)(TY64408* T_64508, NimStringDesc* Key_64509);
N_NIMCALL(NimStringDesc*, copyString)(NimStringDesc* Src_17308);
N_NIMCALL(NIM_BOOL, nsthasKey)(TY64408* T_64517, NimStringDesc* Key_64518);
N_NIMCALL(void, Rawinsert_64522)(TY64408* T_64524, TY44006** Data_64526, NimStringDesc* Key_64527, NimStringDesc* Val_64528);
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819);
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038);
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005);
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010);
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660);
N_NOINLINE(void, Addzct_11025)(TY10618* S_11028, TY10602* C_11029);
N_NIMCALL(void, Enlarge_64531)(TY64408* T_64533);
N_NIMCALL(void*, newSeq)(TNimType* Typ_12804, NI Len_12805);
N_NIMCALL(void, nstPut)(TY64408* T_64583, NimStringDesc* Key_64584, NimStringDesc* Val_64585);
N_NIMCALL(void, Raiseformatexception_64612)(NimStringDesc* S_64614);
N_NIMCALL(void*, newObj)(TNimType* Typ_12307, NI Size_12308);
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393);
N_NIMCALL(NimStringDesc*, rawNewString)(NI Space_17287);
N_NIMCALL(void, raiseException)(E_Base* E_5004, NCSTRING Ename_5005);
N_NIMCALL(NimStringDesc*, Getvalue_64641)(TY64408* T_64643, NU8 Flags_64645, NimStringDesc* Key_64646);
N_NIMCALL(NimStringDesc*, Getenv_38625)(NimStringDesc* Key_38627);
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17409, NIM_CHAR C_17410);
N_NIMCALL(TY64408*, nstnewStringTable)(NU8 Mode_64691);
N_NIMCALL(TY64408*, nstnewStringTableWithPairs)(NimStringDesc** Keyvaluepairs_64727, NI Keyvaluepairs_64727Len0, NU8 Mode_64728);
N_NIMCALL(NimStringDesc*, nstFormat)(NimStringDesc* F_64748, TY64408* T_64749, NU8 Flags_64753);
N_NIMCALL(NimStringDesc*, addChar)(NimStringDesc* S_1603, NIM_CHAR C_1604);
N_NIMCALL(NimStringDesc*, copyStrLast)(NimStringDesc* S_1752, NI First_1753, NI Last_1754);
N_NIMCALL(NimStringDesc*, resizeString)(NimStringDesc* Dest_17382, NI Addlen_17383);
STRING_LITERAL(TMP64514, "", 0);
STRING_LITERAL(TMP64640, "format string: key not found: ", 30);
NIM_CONST TY21402 Patternchars_64755 = {
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x03,
0xFE, 0xFF, 0xFF, 0x87, 0xFE, 0xFF, 0xFF, 0x07,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF,
0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF}
;
extern TY10990 Gch_11010;
extern TNimType* NTI44006; /* TKeyValuePairSeq */
extern TNimType* NTI44278; /* ref EInvalidValue */
extern TNimType* NTI440; /* EInvalidValue */
extern TNimType* NTI64410; /* PStringTable */
extern TNimType* NTI64408; /* TStringTable */
N_NIMCALL(NI, nstlen)(TY64408* T_64421) {
NI Result_64422;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "len";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64422 = 0;
F.line = 36;F.filename = "strtabs.nim";
Result_64422 = (*T_64421).Counter;
framePtr = framePtr->prev;
return Result_64422;
}
N_NIMCALL(NI, Myhash_64466)(TY64408* T_64468, NimStringDesc* Key_64469) {
NI Result_64470;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "myhash";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64470 = 0;
F.line = 61;F.filename = "strtabs.nim";
switch ((*T_64468).Mode) {
case ((NU8) 0):
F.line = 62;F.filename = "strtabs.nim";
Result_64470 = Hash_63480(Key_64469);
break;
case ((NU8) 1):
F.line = 63;F.filename = "strtabs.nim";
Result_64470 = Hashignorecase_63577(Key_64469);
break;
case ((NU8) 2):
F.line = 64;F.filename = "strtabs.nim";
Result_64470 = Hashignorestyle_63521(Key_64469);
break;
}
framePtr = framePtr->prev;
return Result_64470;
}
N_NIMCALL(NIM_BOOL, Mycmp_64471)(TY64408* T_64473, NimStringDesc* A_64474, NimStringDesc* B_64475) {
NIM_BOOL Result_64476;
NI LOC1;
NI LOC2;
NI LOC3;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "myCmp";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64476 = 0;
F.line = 67;F.filename = "strtabs.nim";
switch ((*T_64473).Mode) {
case ((NU8) 0):
F.line = 68;F.filename = "strtabs.nim";
LOC1 = Cmp_1321(A_64474, B_64475);
Result_64476 = (LOC1 == 0);
break;
case ((NU8) 1):
F.line = 69;F.filename = "strtabs.nim";
LOC2 = nsuCmpIgnoreCase(A_64474, B_64475);
Result_64476 = (LOC2 == 0);
break;
case ((NU8) 2):
F.line = 70;F.filename = "strtabs.nim";
LOC3 = nsuCmpIgnoreStyle(A_64474, B_64475);
Result_64476 = (LOC3 == 0);
break;
}
framePtr = framePtr->prev;
return Result_64476;
}
static N_INLINE(NI, subInt)(NI A_5803, NI B_5804) {
NI Result_5805;
NIM_BOOL LOC2;
Result_5805 = 0;
Result_5805 = (NI64)((NU64)(A_5803) - (NU64)(B_5804));
LOC2 = (0 <= (NI64)(Result_5805 ^ A_5803));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_5805 ^ (NI64)((NU64) ~(B_5804))));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5805;
}
N_NIMCALL(NIM_BOOL, Mustrehash_64483)(NI Length_64485, NI Counter_64486) {
NIM_BOOL Result_64487;
NIM_BOOL LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "mustRehash";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64487 = 0;
F.line = 73;F.filename = "strtabs.nim";
internalAssert("/home/andreas/projects/nimrod/lib/pure/strtabs.nim", 73, (Counter_64486 < Length_64485));
F.line = 74;F.filename = "strtabs.nim";
LOC1 = (mulInt(Length_64485, 2) < mulInt(Counter_64486, 3));
if (LOC1) goto LA2;
LOC1 = (subInt(Length_64485, Counter_64486) < 4);
LA2: ;
Result_64487 = LOC1;
framePtr = framePtr->prev;
return Result_64487;
}
static N_INLINE(NI, addInt)(NI A_5603, NI B_5604) {
NI Result_5605;
NIM_BOOL LOC2;
Result_5605 = 0;
Result_5605 = (NI64)((NU64)(A_5603) + (NU64)(B_5604));
LOC2 = (0 <= (NI64)(Result_5605 ^ A_5603));
if (LOC2) goto LA3;
LOC2 = (0 <= (NI64)(Result_5605 ^ B_5604));
LA3: ;
if (!LOC2) goto LA4;
goto BeforeRet;
LA4: ;
raiseOverflow();
BeforeRet: ;
return Result_5605;
}
static N_INLINE(NI, Nexttry_64494)(NI H_64496, NI Maxhash_64497) {
NI Result_64498;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "nextTry";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64498 = 0;
F.line = 77;F.filename = "strtabs.nim";
Result_64498 = (NI64)(addInt(mulInt(5, H_64496), 1) & Maxhash_64497);
framePtr = framePtr->prev;
return Result_64498;
}
N_NIMCALL(NI, Rawget_64499)(TY64408* T_64501, NimStringDesc* Key_64502) {
NI Result_64503;
NI H_64504;
NI LOC1;
NIM_BOOL LOC4;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "RawGet";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64503 = 0;
H_64504 = 0;
F.line = 81;F.filename = "strtabs.nim";
LOC1 = Myhash_64466(T_64501, Key_64502);
H_64504 = (NI64)(LOC1 & ((*T_64501).Data->Sup.len-1));
F.line = 82;F.filename = "strtabs.nim";
while (1) {
if ((NU)(H_64504) >= (NU)((*T_64501).Data->Sup.len)) raiseIndexError();
if (!!((*T_64501).Data->data[H_64504].Key == 0)) goto LA2;
F.line = 83;F.filename = "strtabs.nim";
if ((NU)(H_64504) >= (NU)((*T_64501).Data->Sup.len)) raiseIndexError();
LOC4 = Mycmp_64471(T_64501, (*T_64501).Data->data[H_64504].Key, Key_64502);
if (!LOC4) goto LA5;
F.line = 84;F.filename = "strtabs.nim";
F.line = 84;F.filename = "strtabs.nim";
Result_64503 = H_64504;
goto BeforeRet;
LA5: ;
F.line = 85;F.filename = "strtabs.nim";
H_64504 = Nexttry_64494(H_64504, ((*T_64501).Data->Sup.len-1));
} LA2: ;
F.line = 86;F.filename = "strtabs.nim";
Result_64503 = -1;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_64503;
}
N_NIMCALL(NimStringDesc*, nstGet)(TY64408* T_64508, NimStringDesc* Key_64509) {
NimStringDesc* Result_64510;
NI Index_64511;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "[]";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64510 = 0;
Index_64511 = 0;
F.line = 93;F.filename = "strtabs.nim";
Index_64511 = Rawget_64499(T_64508, Key_64509);
F.line = 94;F.filename = "strtabs.nim";
if (!(0 <= Index_64511)) goto LA2;
F.line = 94;F.filename = "strtabs.nim";
if ((NU)(Index_64511) >= (NU)((*T_64508).Data->Sup.len)) raiseIndexError();
Result_64510 = copyString((*T_64508).Data->data[Index_64511].Val);
goto LA1;
LA2: ;
F.line = 95;F.filename = "strtabs.nim";
Result_64510 = copyString(((NimStringDesc*) &TMP64514));
LA1: ;
framePtr = framePtr->prev;
return Result_64510;
}
N_NIMCALL(NIM_BOOL, nsthasKey)(TY64408* T_64517, NimStringDesc* Key_64518) {
NIM_BOOL Result_64519;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "hasKey";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64519 = 0;
F.line = 99;F.filename = "strtabs.nim";
LOC1 = Rawget_64499(T_64517, Key_64518);
Result_64519 = (0 <= LOC1);
framePtr = framePtr->prev;
return Result_64519;
}
static N_INLINE(TY10602*, Usrtocell_11036)(void* Usr_11038) {
TY10602* Result_11039;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "usrToCell";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_11039 = 0;
F.line = 100;F.filename = "gc.nim";
Result_11039 = ((TY10602*) ((NI64)((NU64)(((NI) (Usr_11038))) - (NU64)(((NI) (((NI)sizeof(TY10602))))))));
framePtr = framePtr->prev;
return Result_11039;
}
static N_INLINE(NI, Atomicinc_3001)(NI* Memloc_3004, NI X_3005) {
NI Result_7208;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicInc";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7208 = 0;
F.line = 29;F.filename = "systhread.nim";
Result_7208 = __sync_add_and_fetch(Memloc_3004, X_3005);
framePtr = framePtr->prev;
return Result_7208;
}
static N_INLINE(NI, Atomicdec_3006)(NI* Memloc_3009, NI X_3010) {
NI Result_7406;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "atomicDec";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/systhread.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_7406 = 0;
F.line = 37;F.filename = "systhread.nim";
Result_7406 = __sync_sub_and_fetch(Memloc_3009, X_3010);
framePtr = framePtr->prev;
return Result_7406;
}
static N_INLINE(void, Rtladdzct_11658)(TY10602* C_11660) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "rtlAddZCT";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 211;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA2;
F.line = 211;F.filename = "gc.nim";
pthread_mutex_lock(&Gch_11010.Zctlock);
LA2: ;
F.line = 212;F.filename = "gc.nim";
Addzct_11025(&Gch_11010.Zct, C_11660);
F.line = 213;F.filename = "gc.nim";
if (!NIM_TRUE) goto LA5;
F.line = 213;F.filename = "gc.nim";
pthread_mutex_unlock(&Gch_11010.Zctlock);
LA5: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, asgnRefNoCycle)(void** Dest_11818, void* Src_11819) {
TY10602* C_11820;
NI LOC4;
TY10602* C_11822;
NI LOC9;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "asgnRefNoCycle";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/gc.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 244;F.filename = "gc.nim";
if (!!((Src_11819 == NIM_NIL))) goto LA2;
C_11820 = 0;
F.line = 245;F.filename = "gc.nim";
C_11820 = Usrtocell_11036(Src_11819);
F.line = 246;F.filename = "gc.nim";
LOC4 = Atomicinc_3001(&(*C_11820).Refcount, 8);
LA2: ;
F.line = 247;F.filename = "gc.nim";
if (!!(((*Dest_11818) == NIM_NIL))) goto LA6;
C_11822 = 0;
F.line = 248;F.filename = "gc.nim";
C_11822 = Usrtocell_11036((*Dest_11818));
F.line = 249;F.filename = "gc.nim";
LOC9 = Atomicdec_3006(&(*C_11822).Refcount, 8);
if (!((NU64)(LOC9) < (NU64)(8))) goto LA10;
F.line = 250;F.filename = "gc.nim";
Rtladdzct_11658(C_11822);
LA10: ;
LA6: ;
F.line = 251;F.filename = "gc.nim";
(*Dest_11818) = Src_11819;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Rawinsert_64522)(TY64408* T_64524, TY44006** Data_64526, NimStringDesc* Key_64527, NimStringDesc* Val_64528) {
NI H_64529;
NI LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "RawInsert";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
H_64529 = 0;
F.line = 103;F.filename = "strtabs.nim";
LOC1 = Myhash_64466(T_64524, Key_64527);
H_64529 = (NI64)(LOC1 & ((*Data_64526)->Sup.len-1));
F.line = 104;F.filename = "strtabs.nim";
while (1) {
if ((NU)(H_64529) >= (NU)((*Data_64526)->Sup.len)) raiseIndexError();
if (!!((*Data_64526)->data[H_64529].Key == 0)) goto LA2;
F.line = 105;F.filename = "strtabs.nim";
H_64529 = Nexttry_64494(H_64529, ((*Data_64526)->Sup.len-1));
} LA2: ;
F.line = 106;F.filename = "strtabs.nim";
if ((NU)(H_64529) >= (NU)((*Data_64526)->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*Data_64526)->data[H_64529].Key, copyString(Key_64527));
F.line = 107;F.filename = "strtabs.nim";
if ((NU)(H_64529) >= (NU)((*Data_64526)->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*Data_64526)->data[H_64529].Val, copyString(Val_64528));
framePtr = framePtr->prev;
}
N_NIMCALL(void, Enlarge_64531)(TY64408* T_64533) {
TY44006* N_64534;
NI I_64564;
NI HEX3Atmp_64576;
NI Res_64578;
TY44006* LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "Enlarge";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
N_64534 = 0;
F.line = 111;F.filename = "strtabs.nim";
N_64534 = (TY44006*) newSeq(NTI44006, mulInt((*T_64533).Data->Sup.len, 2));
I_64564 = 0;
HEX3Atmp_64576 = 0;
F.line = 112;F.filename = "strtabs.nim";
HEX3Atmp_64576 = ((*T_64533).Data->Sup.len-1);
Res_64578 = 0;
F.line = 1011;F.filename = "system.nim";
Res_64578 = 0;
F.line = 1012;F.filename = "system.nim";
while (1) {
if (!(Res_64578 <= HEX3Atmp_64576)) goto LA1;
F.line = 1011;F.filename = "system.nim";
I_64564 = Res_64578;
F.line = 113;F.filename = "strtabs.nim";
if ((NU)(I_64564) >= (NU)((*T_64533).Data->Sup.len)) raiseIndexError();
if (!!((*T_64533).Data->data[I_64564].Key == 0)) goto LA3;
F.line = 113;F.filename = "strtabs.nim";
if ((NU)(I_64564) >= (NU)((*T_64533).Data->Sup.len)) raiseIndexError();
if ((NU)(I_64564) >= (NU)((*T_64533).Data->Sup.len)) raiseIndexError();
Rawinsert_64522(T_64533, &N_64534, (*T_64533).Data->data[I_64564].Key, (*T_64533).Data->data[I_64564].Val);
LA3: ;
F.line = 1014;F.filename = "system.nim";
Res_64578 = addInt(Res_64578, 1);
} LA1: ;
F.line = 114;F.filename = "strtabs.nim";
LOC5 = 0;
LOC5 = (*T_64533).Data;
asgnRefNoCycle((void**) &(*T_64533).Data, N_64534);
N_64534 = LOC5;
framePtr = framePtr->prev;
}
N_NIMCALL(void, nstPut)(TY64408* T_64583, NimStringDesc* Key_64584, NimStringDesc* Val_64585) {
NI Index_64586;
NIM_BOOL LOC5;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "[]=";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Index_64586 = 0;
F.line = 118;F.filename = "strtabs.nim";
Index_64586 = Rawget_64499(T_64583, Key_64584);
F.line = 119;F.filename = "strtabs.nim";
if (!(0 <= Index_64586)) goto LA2;
F.line = 120;F.filename = "strtabs.nim";
if ((NU)(Index_64586) >= (NU)((*T_64583).Data->Sup.len)) raiseIndexError();
asgnRefNoCycle((void**) &(*T_64583).Data->data[Index_64586].Val, copyString(Val_64585));
goto LA1;
LA2: ;
F.line = 122;F.filename = "strtabs.nim";
LOC5 = Mustrehash_64483((*T_64583).Data->Sup.len, (*T_64583).Counter);
if (!LOC5) goto LA6;
F.line = 122;F.filename = "strtabs.nim";
Enlarge_64531(T_64583);
LA6: ;
F.line = 123;F.filename = "strtabs.nim";
Rawinsert_64522(T_64583, &(*T_64583).Data, Key_64584, Val_64585);
F.line = 124;F.filename = "strtabs.nim";
(*T_64583).Counter = addInt((*T_64583).Counter, 1);
LA1: ;
framePtr = framePtr->prev;
}
static N_INLINE(void, appendString)(NimStringDesc* Dest_17392, NimStringDesc* Src_17393) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendString";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 150;F.filename = "sysstr.nim";
memcpy(((NCSTRING) (&(*Dest_17392).data[((*Dest_17392).Sup.len)-0])), ((NCSTRING) ((*Src_17393).data)), ((int) ((NI64)((NI64)((*Src_17393).Sup.len + 1) * 1))));
F.line = 151;F.filename = "sysstr.nim";
(*Dest_17392).Sup.len += (*Src_17393).Sup.len;
framePtr = framePtr->prev;
}
N_NIMCALL(void, Raiseformatexception_64612)(NimStringDesc* S_64614) {
TY440* E_64616;
NimStringDesc* LOC1;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "RaiseFormatException";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
E_64616 = 0;
F.line = 128;F.filename = "strtabs.nim";
E_64616 = (TY440*) newObj(NTI44278, sizeof(TY440));
(*E_64616).Sup.Sup.Sup.m_type = NTI440;
F.line = 129;F.filename = "strtabs.nim";
LOC1 = 0;
LOC1 = rawNewString(S_64614->Sup.len + 30);
appendString(LOC1, ((NimStringDesc*) &TMP64640));
appendString(LOC1, S_64614);
asgnRefNoCycle((void**) &(*E_64616).Sup.Sup.message, LOC1);
F.line = 130;F.filename = "strtabs.nim";
raiseException((E_Base*)E_64616, "EInvalidValue");
framePtr = framePtr->prev;
}
static N_INLINE(void, appendChar)(NimStringDesc* Dest_17409, NIM_CHAR C_17410) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "appendChar";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/system/sysstr.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
F.line = 154;F.filename = "sysstr.nim";
(*Dest_17409).data[((*Dest_17409).Sup.len)-0] = C_17410;
F.line = 155;F.filename = "sysstr.nim";
(*Dest_17409).data[((NI64)((*Dest_17409).Sup.len + 1))-0] = 0;
F.line = 156;F.filename = "sysstr.nim";
(*Dest_17409).Sup.len += 1;
framePtr = framePtr->prev;
}
N_NIMCALL(NimStringDesc*, Getvalue_64641)(TY64408* T_64643, NU8 Flags_64645, NimStringDesc* Key_64646) {
NimStringDesc* Result_64647;
NIM_BOOL LOC2;
NimStringDesc* LOC14;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "getValue";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64647 = 0;
F.line = 133;F.filename = "strtabs.nim";
LOC2 = nsthasKey(T_64643, Key_64646);
if (!LOC2) goto LA3;
F.line = 133;F.filename = "strtabs.nim";
F.line = 133;F.filename = "strtabs.nim";
Result_64647 = nstGet(T_64643, Key_64646);
goto BeforeRet;
LA3: ;
F.line = 134;F.filename = "strtabs.nim";
if (!((Flags_64645 &(1<<((((NU8) 0))&7)))!=0)) goto LA6;
F.line = 134;F.filename = "strtabs.nim";
Result_64647 = Getenv_38625(Key_64646);
goto LA5;
LA6: ;
F.line = 135;F.filename = "strtabs.nim";
Result_64647 = copyString(((NimStringDesc*) &TMP64514));
LA5: ;
F.line = 136;F.filename = "strtabs.nim";
if (!(Result_64647->Sup.len == 0)) goto LA9;
F.line = 137;F.filename = "strtabs.nim";
if (!((Flags_64645 &(1<<((((NU8) 2))&7)))!=0)) goto LA12;
F.line = 137;F.filename = "strtabs.nim";
LOC14 = 0;
LOC14 = rawNewString(Key_64646->Sup.len + 1);
appendChar(LOC14, 36);
appendString(LOC14, Key_64646);
Result_64647 = LOC14;
goto LA11;
LA12: ;
if (!!(((Flags_64645 &(1<<((((NU8) 1))&7)))!=0))) goto LA15;
F.line = 138;F.filename = "strtabs.nim";
Raiseformatexception_64612(Key_64646);
goto LA11;
LA15: ;
LA11: ;
LA9: ;
BeforeRet: ;
framePtr = framePtr->prev;
return Result_64647;
}
N_NIMCALL(TY64408*, nstnewStringTable)(NU8 Mode_64691) {
TY64408* Result_64692;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newStringTable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64692 = 0;
F.line = 143;F.filename = "strtabs.nim";
Result_64692 = (TY64408*) newObj(NTI64410, sizeof(TY64408));
(*Result_64692).Sup.m_type = NTI64408;
F.line = 144;F.filename = "strtabs.nim";
(*Result_64692).Mode = Mode_64691;
F.line = 145;F.filename = "strtabs.nim";
(*Result_64692).Counter = 0;
F.line = 146;F.filename = "strtabs.nim";
asgnRefNoCycle((void**) &(*Result_64692).Data, (TY44006*) newSeq(NTI44006, 64));
framePtr = framePtr->prev;
return Result_64692;
}
N_NIMCALL(TY64408*, nstnewStringTableWithPairs)(NimStringDesc** Keyvaluepairs_64727, NI Keyvaluepairs_64727Len0, NU8 Mode_64728) {
TY64408* Result_64729;
NI I_64730;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "newStringTable";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64729 = 0;
F.line = 155;F.filename = "strtabs.nim";
Result_64729 = nstnewStringTable(Mode_64728);
I_64730 = 0;
F.line = 156;F.filename = "strtabs.nim";
I_64730 = 0;
F.line = 157;F.filename = "strtabs.nim";
while (1) {
if (!(I_64730 < (Keyvaluepairs_64727Len0-1))) goto LA1;
F.line = 158;F.filename = "strtabs.nim";
if ((NU)(I_64730) >= (NU)(Keyvaluepairs_64727Len0)) raiseIndexError();
if ((NU)(addInt(I_64730, 1)) >= (NU)(Keyvaluepairs_64727Len0)) raiseIndexError();
nstPut(Result_64729, Keyvaluepairs_64727[I_64730], Keyvaluepairs_64727[addInt(I_64730, 1)]);
F.line = 159;F.filename = "strtabs.nim";
I_64730 = addInt(I_64730, 2);
} LA1: ;
framePtr = framePtr->prev;
return Result_64729;
}
N_NIMCALL(NimStringDesc*, nstFormat)(NimStringDesc* F_64748, TY64408* T_64749, NU8 Flags_64753) {
NimStringDesc* Result_64754;
NI I_64757;
NI J_64776;
NIM_BOOL LOC6;
NimStringDesc* LOC8;
NimStringDesc* LOC9;
NI J_64795;
NIM_BOOL LOC11;
NimStringDesc* LOC13;
NimStringDesc* LOC14;
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "%";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
Result_64754 = 0;
F.line = 166;F.filename = "strtabs.nim";
Result_64754 = copyString(((NimStringDesc*) &TMP64514));
I_64757 = 0;
F.line = 167;F.filename = "strtabs.nim";
I_64757 = 0;
F.line = 168;F.filename = "strtabs.nim";
while (1) {
if (!(I_64757 < F_64748->Sup.len)) goto LA1;
F.line = 169;F.filename = "strtabs.nim";
if ((NU)(I_64757) > (NU)(F_64748->Sup.len)) raiseIndexError();
if (!((NU8)(F_64748->data[I_64757]) == (NU8)(36))) goto LA3;
F.line = 170;F.filename = "strtabs.nim";
if ((NU)(addInt(I_64757, 1)) > (NU)(F_64748->Sup.len)) raiseIndexError();
switch (((NU8)(F_64748->data[addInt(I_64757, 1)]))) {
case 36:
F.line = 172;F.filename = "strtabs.nim";
Result_64754 = addChar(Result_64754, 36);
F.line = 173;F.filename = "strtabs.nim";
I_64757 = addInt(I_64757, 2);
break;
case 123:
J_64776 = 0;
F.line = 175;F.filename = "strtabs.nim";
J_64776 = addInt(I_64757, 1);
F.line = 176;F.filename = "strtabs.nim";
while (1) {
LOC6 = (J_64776 < F_64748->Sup.len);
if (!(LOC6)) goto LA7;
if ((NU)(J_64776) > (NU)(F_64748->Sup.len)) raiseIndexError();
LOC6 = !(((NU8)(F_64748->data[J_64776]) == (NU8)(125)));
LA7: ;
if (!LOC6) goto LA5;
F.line = 176;F.filename = "strtabs.nim";
J_64776 = addInt(J_64776, 1);
} LA5: ;
F.line = 177;F.filename = "strtabs.nim";
LOC8 = 0;
LOC8 = copyStrLast(F_64748, addInt(I_64757, 2), subInt(J_64776, 1));
LOC9 = 0;
LOC9 = Getvalue_64641(T_64749, Flags_64753, LOC8);
Result_64754 = resizeString(Result_64754, LOC9->Sup.len + 0);
appendString(Result_64754, LOC9);
F.line = 178;F.filename = "strtabs.nim";
I_64757 = addInt(J_64776, 1);
break;
case 97 ... 122:
case 65 ... 90:
case 128 ... 255:
case 95:
J_64795 = 0;
F.line = 180;F.filename = "strtabs.nim";
J_64795 = addInt(I_64757, 1);
F.line = 181;F.filename = "strtabs.nim";
while (1) {
LOC11 = (J_64795 < F_64748->Sup.len);
if (!(LOC11)) goto LA12;
if ((NU)(J_64795) > (NU)(F_64748->Sup.len)) raiseIndexError();
LOC11 = (((NU8)(F_64748->data[J_64795])) >= ((NU8)(97)) && ((NU8)(F_64748->data[J_64795])) <= ((NU8)(122)) || ((NU8)(F_64748->data[J_64795])) >= ((NU8)(65)) && ((NU8)(F_64748->data[J_64795])) <= ((NU8)(90)) || ((NU8)(F_64748->data[J_64795])) >= ((NU8)(48)) && ((NU8)(F_64748->data[J_64795])) <= ((NU8)(57)) || ((NU8)(F_64748->data[J_64795])) == ((NU8)(95)) || ((NU8)(F_64748->data[J_64795])) >= ((NU8)(128)) && ((NU8)(F_64748->data[J_64795])) <= ((NU8)(255)));
LA12: ;
if (!LOC11) goto LA10;
F.line = 181;F.filename = "strtabs.nim";
J_64795 = addInt(J_64795, 1);
} LA10: ;
F.line = 182;F.filename = "strtabs.nim";
LOC13 = 0;
LOC13 = copyStrLast(F_64748, addInt(I_64757, 1), subInt(J_64795, 1));
LOC14 = 0;
LOC14 = Getvalue_64641(T_64749, Flags_64753, LOC13);
Result_64754 = resizeString(Result_64754, LOC14->Sup.len + 0);
appendString(Result_64754, LOC14);
F.line = 183;F.filename = "strtabs.nim";
I_64757 = J_64795;
break;
default:
F.line = 185;F.filename = "strtabs.nim";
if ((NU)(I_64757) > (NU)(F_64748->Sup.len)) raiseIndexError();
Result_64754 = addChar(Result_64754, F_64748->data[I_64757]);
F.line = 186;F.filename = "strtabs.nim";
I_64757 = addInt(I_64757, 1);
break;
}
goto LA2;
LA3: ;
F.line = 188;F.filename = "strtabs.nim";
if ((NU)(I_64757) > (NU)(F_64748->Sup.len)) raiseIndexError();
Result_64754 = addChar(Result_64754, F_64748->data[I_64757]);
F.line = 189;F.filename = "strtabs.nim";
I_64757 = addInt(I_64757, 1);
LA2: ;
} LA1: ;
framePtr = framePtr->prev;
return Result_64754;
}
N_NOINLINE(void, strtabsInit)(void) {
volatile struct {TFrame* prev;NCSTRING procname;NI line;NCSTRING filename;NI len;
} F;
F.procname = "strtabs";
F.prev = framePtr;
F.filename = "/home/andreas/projects/nimrod/lib/pure/strtabs.nim";
F.line = 0;
framePtr = (TFrame*)&F;
F.len = 0;
framePtr = framePtr->prev;
}

